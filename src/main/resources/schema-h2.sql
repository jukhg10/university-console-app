-- Drop tables if they exist to ensure a clean slate


-- AÃ±adida la tabla PERSONA
CREATE TABLE PERSONA (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NOMBRES VARCHAR(255) NOT NULL,
    APELLIDOS VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255)
);

CREATE TABLE FACULTAD (
    ID BIGINT AUTO_INCREMENT PRIMARY KEY, -- <-- Cambiado a AUTO_INCREMENT
    NOMBRE VARCHAR(255) NOT NULL,
    DECANO_ID BIGINT,
    FOREIGN KEY (DECANO_ID) REFERENCES PERSONA(ID)
);

CREATE TABLE PROGRAMA (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(255) NOT NULL,
    DURACION DOUBLE,
    REGISTRO_CALIFICADO DATE,
    FACULTAD_ID BIGINT,
    FOREIGN KEY (FACULTAD_ID) REFERENCES FACULTAD(ID)
);

CREATE TABLE ESTUDIANTE (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NOMBRES VARCHAR(255) NOT NULL,
    APELLIDOS VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255),
    CODIGO BIGINT
);

CREATE TABLE PROFESOR (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NOMBRES VARCHAR(255) NOT NULL,
    APELLIDOS VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255),
    TIPO_CONTRATO VARCHAR(255)
);

CREATE TABLE CURSO (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(255) NOT NULL,
    PROGRAMA_ID BIGINT,
    ACTIVO BOOLEAN,
    FOREIGN KEY (PROGRAMA_ID) REFERENCES PROGRAMA(ID)
);

CREATE TABLE INSCRIPCION (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    ANO INT,
    SEMESTRE INT,
    ESTUDIANTE_ID BIGINT,
    CURSO_ID BIGINT,
    FOREIGN KEY (ESTUDIANTE_ID) REFERENCES ESTUDIANTE(ID),
    FOREIGN KEY (CURSO_ID) REFERENCES CURSO(ID)
);

CREATE TABLE CURSOPROFESOR (
    PROFESOR_ID BIGINT,
    CURSO_ID INT,
    ANO INT,
    SEMESTRE INT,
    PRIMARY KEY (PROFESOR_ID, CURSO_ID, ANO, SEMESTRE),
     FOREIGN KEY (PROFESOR_ID) REFERENCES PROFESOR(ID),
    FOREIGN KEY (CURSO_ID) REFERENCES CURSO(ID)
);